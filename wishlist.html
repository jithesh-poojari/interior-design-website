<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Your Wishlist - DreamSpace</title>
    <link rel="stylesheet" href="css/globals.css" />
    <link
      rel="preload"
      href="./assets/fonts/Inter-VariableFont.woff2"
      as="font"
      type="font/woff2"
    />
    <link
      href="./assets/fonts/PlaywriteUSModern.woff2"
      rel="preload"
      as="font"
      type="font/woff2"
    />
    <script src="https://unpkg.com/lucide@latest"></script>
    <script defer src="./script.js"></script>
    <style>
      /* Wishlist Page Specific Styles */
      .wishlist-container {
        margin: 0 auto;
        padding: 6rem 1.5rem 4rem;
      }

      .wishlist-hero {
        text-align: center;
        margin-bottom: 3rem;
      }

      .wishlist-hero h1 {
        font-size: clamp(2rem, 4vw, 2.5rem);
        font-weight: 700;
        margin-bottom: 0.75rem;
        color: hsl(var(--foreground));
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
      }

      .wishlist-hero p {
        color: hsl(var(--muted-foreground));
        font-size: 1.0625rem;
        max-width: 700px;
        margin: 0 auto;
      }

      /* Controls */
      .wishlist-controls {
        display: flex;
        gap: 1rem;
        margin-bottom: 2.5rem;
        flex-wrap: wrap;
        justify-content: space-between;
      }

      .controls-group {
        display: flex;
        gap: 1rem;
        flex-wrap: wrap;
      }

      .control-select {
        padding: 0.75rem 1rem;
        border: 1px solid hsl(var(--border));
        border-radius: var(--radius);
        background: hsl(var(--background));
        color: hsl(var(--foreground));
        font-size: 0.9375rem;
        min-width: 200px;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .control-select:focus {
        outline: none;
        border-color: hsl(var(--ring));
        box-shadow: 0 0 0 3px hsl(var(--ring) / 0.1);
      }

      .back-link {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.75rem 1.5rem;
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
        border-radius: var(--radius);
        text-decoration: none;
        font-weight: 500;
        border: 1px solid hsl(var(--border));
        transition: all 0.2s ease;
      }

      .back-link:hover {
        background: hsl(var(--muted) / 0.7);
      }

      /* Wishlist Grid */
      .wishlist-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
      }

      .wishlist-card {
        background: hsl(var(--card));
        border: 1px solid hsl(var(--border));
        border-radius: calc(var(--radius) * 1.5);
        overflow: hidden;
        transition: all 0.3s ease;
        display: flex;
        flex-direction: column;
      }

      .wishlist-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px hsla(var(--foreground), 0.1);
        border-color: hsl(var(--primary));
      }

      .wishlist-image-wrapper {
        position: relative;
        width: 100%;
        height: 240px;
      }

      .wishlist-image {
        width: 100%;
        height: 100%;
        object-fit: cover;
        background: hsl(var(--muted));
      }

      .wishlist-category {
        position: absolute;
        top: 1rem;
        right: 1rem;
        padding: 0.25rem 0.75rem;
        background: hsl(var(--card) / 0.95);
        color: hsl(var(--primary));
        border-radius: calc(var(--radius) * 0.75);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        backdrop-filter: blur(4px);
      }

      .wishlist-content {
        padding: 1.5rem;
        flex: 1;
        display: flex;
        flex-direction: column;
      }

      .wishlist-name {
        font-size: 1.25rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        color: hsl(var(--card-foreground));
      }

      .wishlist-desc {
        color: hsl(var(--muted-foreground));
        font-size: 0.875rem;
        line-height: 1.6;
        margin-bottom: 1rem;
        flex: 1;
      }

      .wishlist-price {
        font-size: 1.5rem;
        font-weight: 700;
        color: hsl(var(--primary));
        margin-bottom: 1rem;
      }

      .wishlist-actions {
        display: flex;
        gap: 0.75rem;
      }

      .btn-view-detail,
      .btn-remove {
        flex: 1;
        justify-content: center;
      }

      .btn-view-detail {
        background: hsl(var(--muted));
        color: hsl(var(--foreground));
        border: 1px solid hsl(var(--border));
      }

      .btn-view-detail:hover {
        background: hsl(var(--muted) / 0.7);
      }

      .btn-remove {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
        border: 1px solid hsl(var(--border));
      }

      .btn-remove:hover {
        background: hsl(0 84% 60%);
        color: white;
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 4rem 2rem;
      }

      .empty-state i {
        width: 80px;
        height: 80px;
        color: hsl(var(--muted-foreground));
        margin-bottom: 1.5rem;
      }

      .empty-state h3 {
        font-size: 1.5rem;
        font-weight: 600;
        margin-bottom: 0.75rem;
        color: hsl(var(--foreground));
      }

      .empty-state p {
        color: hsl(var(--muted-foreground));
        margin-bottom: 2rem;
      }

      /* Modal */
      .modal {
        display: none;
        position: fixed;
        z-index: 1000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
        justify-content: center;
        align-items: center;
        padding: 1rem;
      }

      .modal-content {
        background: hsl(var(--card));
        border-radius: calc(var(--radius) * 2);
        padding: 2rem;
        max-width: 600px;
        width: 100%;
        position: relative;
        box-shadow: 0 20px 60px hsla(var(--foreground), 0.3);
        animation: modalSlideIn 0.3s ease;
      }

      @keyframes modalSlideIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .modal-close {
        position: absolute;
        top: 1rem;
        right: 1rem;
        background: hsl(var(--muted));
        border: none;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .modal-close:hover {
        background: hsl(var(--primary));
        color: hsl(var(--primary-foreground));
      }

      .modal-image {
        width: 100%;
        height: 300px;
        object-fit: cover;
        border-radius: var(--radius);
        margin-bottom: 1.5rem;
      }

      .modal-category {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        background: hsl(var(--primary) / 0.15);
        color: hsl(var(--primary));
        border-radius: calc(var(--radius) * 0.75);
        font-size: 0.75rem;
        font-weight: 600;
        text-transform: uppercase;
        margin-bottom: 1rem;
      }

      .modal-name {
        font-size: 1.75rem;
        font-weight: 700;
        margin-bottom: 1rem;
        color: hsl(var(--foreground));
      }

      .modal-desc {
        color: hsl(var(--muted-foreground));
        line-height: 1.6;
        margin-bottom: 1.5rem;
      }

      .modal-price {
        font-size: 2rem;
        font-weight: 700;
        color: hsl(var(--primary));
      }

      /* Responsive */
      @media (max-width: 768px) {
        .wishlist-controls {
          flex-direction: column;
        }

        .controls-group {
          flex-direction: column;
          width: 100%;
        }

        .control-select,
        .back-link {
          width: 100%;
        }

        .wishlist-grid {
          grid-template-columns: 1fr;
        }

        .wishlist-actions {
          flex-direction: column;
        }

        .modal-content {
          padding: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation -->
    <header class="top-header">
      <nav class="nav-container">
        <a class="logo" href="./index.html">DreamSpace</a>

        <!-- Menu Toggle with Lucide Icons -->
        <button class="menu-toggle" id="menuToggle" aria-label="Toggle menu">
          <i data-lucide="menu" class="menu-icon"></i>
          <i data-lucide="x" class="close-icon"></i>
        </button>

        <ul class="nav-links" id="navLinks">
          <!-- User Welcome (Mobile Only - Shows at top when authenticated) -->
          <li class="user-welcome" id="userWelcome">
            <div class="user-welcome-content">
              <span class="welcome-text">Welcome,</span>
              <span class="user-name-display" id="userNameMobile"></span>
            </div>
          </li>

          <!-- Navigation Links -->
          <li><a href="./index.html">Home</a></li>
          <li><a href="./booking.html">Consultation</a></li>
          <li><a href="./projects.html">Projects</a></li>
          <li><a href="./products.html">Products</a></li>
          <li><a href="./services.html">Services</a></li>

          <!-- Theme Toggle -->
          <li>
            <button
              class="theme-toggle"
              id="themeToggle"
              aria-label="Toggle theme"
            >
              <i
                data-lucide="moon"
                class="theme-icon moon-icon"
                id="moonIcon"
              ></i>
              <i data-lucide="sun" class="theme-icon sun-icon" id="sunIcon"></i>
              <span class="theme-text" id="themeText">Dark Mode</span>
            </button>
          </li>

          <!-- Auth Section - Login/Signup (Hidden when authenticated) -->
          <li class="auth-section" id="authSection" style="display: none">
            <a href="./login.html" class="btn btn-outline auth-btn">
              <i data-lucide="log-in"></i>
              Login
            </a>
            <a href="./sign-up.html" class="btn btn-primary auth-btn">
              <i data-lucide="user-plus"></i>
              Sign Up
            </a>
          </li>

          <!-- User Section - Name & Logout (Hidden when not authenticated) -->
          <li class="user-section" id="userSection" style="display: none">
            <button class="btn btn-primary" id="logoutBtn">
              <i data-lucide="log-out"></i>
              Logout
            </button>
          </li>
        </ul>
      </nav>
    </header>

    <!-- Main Content -->
    <main class="wishlist-container">
      <div class="wishlist-hero">
        <h1>Your Wishlist</h1>
        <p>
          Save the designs that inspire you. We'll use your wishlist to bring
          your dream interiors to life.
        </p>
      </div>

      <!-- Controls -->
      <div class="wishlist-controls">
        <div class="controls-group">
          <select id="sortSelect" class="control-select">
            <option value="default">Sort By: Default</option>
            <option value="name-asc">Name: A → Z</option>
            <option value="name-desc">Name: Z → A</option>
            <option value="price-asc">Price: Low → High</option>
            <option value="price-desc">Price: High → Low</option>
          </select>

          <select id="categorySelect" class="control-select">
            <option value="all">All Categories</option>
            <option value="Furniture">Furniture</option>
            <option value="Lighting">Lighting</option>
            <option value="Decor">Decor</option>
          </select>
        </div>

        <a href="./products.html" class="back-link">
          <i data-lucide="arrow-left"></i>
          Back to Products
        </a>
      </div>

      <!-- Wishlist Grid -->
      <div class="wishlist-grid" id="wishlistContainer"></div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none">
        <i data-lucide="heart-off"></i>
        <h3>Your Wishlist is Empty</h3>
        <p>Start adding your favorite products to see them here</p>
        <a href="./products.html" class="btn btn-primary">
          <i data-lucide="shopping-bag"></i>
          Browse Products
        </a>
      </div>
    </main>

    <!-- Detail Modal -->
    <div id="detailModal" class="modal">
      <div class="modal-content">
        <button class="modal-close">
          <i data-lucide="x"></i>
        </button>
        <img
          id="modalImg"
          src="images/placeholder.png"
          alt="Preview"
          class="modal-image"
        />
        <span class="modal-category" id="modalCategory">Category</span>
        <h2 class="modal-name" id="modalName">Item Name</h2>
        <p class="modal-desc" id="modalDesc"></p>
        <p class="modal-price" id="modalPrice"></p>
      </div>
    </div>

    <!-- Footer -->
    <footer>
      <div class="footer-grid">
        <div class="footer-section">
          <h3>DreamSpace</h3>
          <p>
            Creating exceptional interiors that inspire and delight since 2010.
          </p>
          <div class="social-links">
            <a href="#" aria-label="Facebook">
              <i data-lucide="facebook"></i>
            </a>
            <a href="#" aria-label="Instagram">
              <i data-lucide="instagram"></i>
            </a>
            <a href="#" aria-label="Twitter">
              <i data-lucide="twitter"></i>
            </a>
            <a href="#" aria-label="LinkedIn">
              <i data-lucide="linkedin"></i>
            </a>
          </div>
        </div>
        <div class="footer-section">
          <h3>Quick Links</h3>
          <ul>
            <li><a href="./booking.html">Schedule Consultation</a></li>
            <li><a href="./projects.html">Projects</a></li>
            <li><a href="./products.html">Products</a></li>
            <li><a href="./wishlist.html">Products Wishlist</a></li>
            <li><a href="./about.html">About Us</a></li>
            <li><a href="./contact.html">Contact Us</a></li>
            <li><a href="./feedback.html">Share Feedback</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Services</h3>
          <ul>
            <li>
              <a href="./services.html#personalized-design"
                >Personalized Design</a
              >
            </li>
            <li><a href="./services.html#wall-painting">Wall Painting</a></li>
            <li>
              <a href="./services.html#furniture-design">Custom Furniture</a>
            </li>
            <li>
              <a href="./services.html#lighting-decor">Lighting & Décor</a>
            </li>
            <li>
              <a href="./services.html#modular-kitchen">Modular Kitchen</a>
            </li>
            <li><a href="./services.html#space-planning">Space Planning</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h3>Newsletter</h3>
          <p>Subscribe for design tips and inspiration</p>
          <form class="newsletter-form">
            <div class="form-group">
              <input
                type="email"
                class="form-input"
                placeholder="Enter your email"
                required
              />
              <button type="submit" class="btn btn-primary">Subscribe</button>
            </div>
          </form>
        </div>
      </div>
      <div class="footer-bottom">
        <p>&copy; 2025 DreamSpace Interior Design. All rights reserved.</p>
      </div>
    </footer>

    <div id="toast" class="toast"></div>

    <script>
      const STORAGE_KEY = "wishlist";
      const wishlistContainer = document.getElementById("wishlistContainer");
      const emptyState = document.getElementById("emptyState");
      const sortSelect = document.getElementById("sortSelect");
      const categorySelect = document.getElementById("categorySelect");
      const detailModal = document.getElementById("detailModal");

      let wishlist = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];

      function renderWishlist() {
        const cat = categorySelect.value;
        let filtered = wishlist.filter(
          (item) => cat === "all" || item.category === cat
        );

        const sort = sortSelect.value;
        filtered.sort((a, b) => {
          const getPrice = (i) => parseFloat(i.price.replace(/[^\d.]/g, ""));
          if (sort === "name-asc") return a.name.localeCompare(b.name);
          if (sort === "name-desc") return b.name.localeCompare(a.name);
          if (sort === "price-asc") return getPrice(a) - getPrice(b);
          if (sort === "price-desc") return getPrice(b) - getPrice(a);
          return 0;
        });

        wishlistContainer.innerHTML = "";
        if (filtered.length === 0) {
          emptyState.style.display = "block";
          wishlistContainer.style.display = "none";
        } else {
          emptyState.style.display = "none";
          wishlistContainer.style.display = "grid";
          filtered.forEach((item, index) => {
            wishlistContainer.innerHTML += `
              <div class="wishlist-card">
                <div class="wishlist-image-wrapper">
                  <img src="${item.img || "images/placeholder.png"}" alt="${
              item.name
            }" class="wishlist-image" />
                  <span class="wishlist-category">${item.category}</span>
                </div>
                <div class="wishlist-content">
                  <h3 class="wishlist-name">${item.name}</h3>
                  <p class="wishlist-desc">${item.desc}</p>
                  <p class="wishlist-price">${item.price}</p>
                  <div class="wishlist-actions">
                    <button class="btn btn-view-detail view-detail" data-index="${index}">
                      <i data-lucide="eye"></i>
                      View Detail
                    </button>
                    <button class="btn btn-remove remove-btn" data-index="${index}">
                      <i data-lucide="trash-2"></i>
                      Remove
                    </button>
                  </div>
                </div>
              </div>
            `;
          });

          // Re-initialize Lucide icons
          lucide.createIcons();

          // Add event listeners
          document.querySelectorAll(".view-detail").forEach((btn) => {
            btn.addEventListener("click", () => viewDetail(btn.dataset.index));
          });

          document.querySelectorAll(".remove-btn").forEach((btn) => {
            btn.addEventListener("click", () => removeItem(btn.dataset.index));
          });
        }

        // Re-initialize Lucide icons for empty state
        lucide.createIcons();
      }

      function removeItem(index) {
        const removed = wishlist.splice(index, 1);
        localStorage.setItem(STORAGE_KEY, JSON.stringify(wishlist));
        showToast(`${removed[0].name} removed from wishlist`, "success");
        renderWishlist();
      }

      function viewDetail(index) {
        const item = wishlist[index];
        document.getElementById("modalImg").src =
          item.img || "images/placeholder.png";
        document.getElementById("modalName").textContent = item.name;
        document.getElementById("modalDesc").textContent = item.desc;
        document.getElementById("modalPrice").textContent = item.price;
        document.getElementById("modalCategory").textContent = item.category;
        detailModal.style.display = "flex";
        lucide.createIcons();
      }

      document.querySelector(".modal-close").onclick = () => {
        detailModal.style.display = "none";
      };

      window.onclick = (e) => {
        if (e.target === detailModal) detailModal.style.display = "none";
      };

      sortSelect.onchange = renderWishlist;
      categorySelect.onchange = renderWishlist;

      renderWishlist();
    </script>
  </body>
</html>
